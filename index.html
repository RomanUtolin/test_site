<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROMAN TEST SITE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ROMAN TEST SITE">
    <meta name="author" content="ROMAN TEST SITE">

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-P33K754W');</script>
    <!-- End Google Tag Manager -->

    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-messaging.js"></script>
    <script type="text/javascript" src="ak-push.js"></script>
    <link rel="manifest" href="manifest.json"></link>
</head>

<body>

<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P33K754W"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="container">
    <h1>Добро пожаловать!</h1>
    <p>PUSH-уведомление:</p>
    <input type="text" id="nameInput" placeholder="Ваше имя">

    <!-- Кнопка подписки -->
    <button type="button" id="init_sub">PUSH - подписка</button>

    <script>
        document.getElementById('init_sub').addEventListener('click', () => {
            const email = document.getElementById('nameInput').value.trim() + '_ex@example.com';
            new AKPush().initSubscription({email: email})

            //Отправляем в ga4
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: 'push_subscribe',
                email: email
            });

        });
    </script>
</div>


<p>Действия с товарами:</p>

<!-- id товара -->
<input type="text" id="offer_id" placeholder="Id товара">

<div class="container">
    <p>Избранное:</p>
    <!-- Кнопки -->
    <button type="button" id="add_to_wishlist">Добавить в избранное</button>
    <button type="button" id="remove_from_wishlist">Удалить из избранного</button>

    <script>
        document.getElementById('add_to_wishlist').addEventListener('click', () => {
            const offerId = document.getElementById('offer_id').value.trim();

            //Отправляем в ga4
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: 'offers_like',
                email: offerId
            });
            <!--TODO: Печать в консольку  -->
            console.log("add_to_wishlist ", offerId);

        });

        document.getElementById('remove_from_wishlist').addEventListener('click', () => {
            const offerId = document.getElementById('offer_id').value.trim();

            //Отправляем в ga4
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: 'offers_like',
                email: offerId
            });
            <!--TODO: Печать в консольку  -->
            console.log("remove_from_wishlist ", offerId);

        });
    </script>
</div>

<div class="container">
    <p>Корзина:</p>
    <!-- Кнопки -->
    <button type="button" id="add_to_cart">Добавить в корзину</button>
    <button type="button" id="remove_from_cart">Удалить из корзины</button>

    <script>
        document.getElementById('add_to_cart').addEventListener('click', () => {
            const offerId = document.getElementById('offer_id').value.trim();

            //Отправляем в ga4
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: 'offers_like',
                email: offerId
            });
            <!--TODO: Печать в консольку  -->
            console.log("add_to_cart ", offerId);

        });

        document.getElementById('remove_from_cart').addEventListener('click', () => {
            const offerId = document.getElementById('offer_id').value.trim();

            //Отправляем в ga4
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: 'offers_like',
                email: offerId
            });
            <!--TODO: Печать в консольку  -->
            console.log("remove_from_cart ", offerId);

        });
    </script>
</div>

</body>
</html>